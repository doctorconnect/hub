
@{
    ViewBag.Title = "UserRegistration";
}

<h2>UserRegistration</h2>

@model doctorhubBusinessEntities.UserRegistrationModel
@{
    ViewBag.Title = "UserRegistration";
    Layout = "~/Views/Shared/_LayoutRegis.cshtml";
}

@using (Html.BeginForm("UserRegistration", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div class="container">
        <div class="mission-box">
            <h1>Our Mission</h1>
            <h2>To help people live healthier lives and to help† make the health system work better for everyone.</h2>
            <div class="row m-b-20">
                <div class="col-sm-2 p-t-20 text-center"><img src="../images/people.png" alt="" /></div>
                <div class="col-sm-10 p-l-0">
                    <p>
                        <strong>People</strong><br>
                        Unmatched health care expertise
                    </p>
                    <p>As a global team of 125,000+, our skill and expertise is matched only by the commitment and passion we share to transform health care.</p>
                </div>
            </div>

            <div class="row m-b-20">
                <div class="col-sm-2 p-t-20 text-center"><img src="../images/action.png" alt="" /></div>
                <div class="col-sm-10 p-l-0">
                    <p>
                        <strong>Action</strong><br>
                        Scale to mobiles and achieve results
                    </p>
                    <p>With depth of expertise, flexibility and broad scale to take action, we deliver solutions our clients need, where and when they need them.</p>
                </div>
            </div>

            <div class="row m-b-20">
                <div class="col-sm-2 p-t-20 text-center"><img src="../images/technology.png" alt="" /></div>
                <div class="col-sm-10 p-l-0">
                    <p>
                        <strong>Technology</strong><br>
                        Comprehensive solutions
                    </p>
                    <p>With system-wide scale, our technology is built to meet our clientsí changing needs while working to modernize the health care system.</p>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-2 p-t-20 text-center"><img src="../images/data.png" alt="" /></div>
                <div class="col-sm-10 p-l-0">
                    <p>
                        <strong>Data</strong><br>
                        Insights that drive decisions
                    </p>
                    <p>Powered by generations of longitudinal data, our insights support smarter decisions that lead to better experiences, outcomes and savings.</p>
                </div>
            </div>
        </div>

        <div class="registration-box">
            <div class="registration-heading">
                <img src="../images/hand-shake-icon.png" alt="" /> ìHi! Welcome to KMT. <span>As a first time user, please register using the form belowî</span>
            </div>
            <div class="registration-content">

                <small>All fields are required except for Profile Picture</small>
                <div class="row">
                    <div class="col-sm-6 p-r-9">
                        <div class="form-group">
                            <label for="email">Employee Id</label>
                            @Html.TextBoxFor(model => model.UserCode, new { @class = "form-control", disabled = "disabled" })
                            @Html.HiddenFor(model => model.UserCode, new { @id = "hdUserCode", })
                            @Html.HiddenFor(model => model.UserNTID, new { @id = "hdUserNTID", })
                            @*<input type="email" class="form-control">*@
                        </div>
                    </div>
                    <div class="col-sm-6 p-l-9">
                        <div class="form-group">
                            <label for="email">Employee Name</label>
                            @Html.TextBoxFor(model => model.UserName, new { @class = "form-control", disabled = "disabled" })
                            @Html.HiddenFor(model => model.UserName, new { @id = "hdUserName", })
                            <input type="hidden" value="@HttpContext.Current.Session["UserNTID"].ToString()" id="hdEmployeeNTIDSessionVal" />
                        </div>
                    </div>

                    <div class="col-sm-6 p-r-9">
                        <div class="form-group">
                            <label for="email">Employee Email</label>
                            @Html.TextBoxFor(model => model.UserEmail, new { @class = "form-control", disabled = "disabled" })
                            @Html.HiddenFor(model => model.UserEmail, new { @id = "hdUserEmail", })
                        </div>
                    </div>

                    <div class="col-sm-6 p-l-9">
                        <div class="form-group">
                            <label for="email">Manager</label>
                            @Html.TextBoxFor(model => model.ManagerName, new { @class = "form-control", disabled = "disabled" })
                            @Html.HiddenFor(model => model.ManagerName, new { @id = "hdManagerName", })
                            @Html.HiddenFor(model => model.ManagerNTID, new { @id = "hdManagerNTID", })
                            @Html.HiddenFor(model => model.ManagerEmail, new { @id = "hdManagerEmail", })
                            @Html.HiddenFor(model => model.ManagerCode, new { @id = "hdManagerCode", })
                        </div>
                    </div>

                    <div class="col-sm-6 p-r-9">
                        <div class="form-group">
                            <label for="email">Business Segment<b class="text-danger">*</b></label>
                            @Html.DropDownListFor(model => model.BusinessSegmentId, Model.BusinessSegment, "--- Select Business Segment ---", new { onchange = "document.forms[0].submit();", @class = "form-control ddlValidation", id = "ddlBS" })
                        </div>
                    </div>
                    <div class="col-sm-6 p-l-9">
                        <div class="form-group">
                            <label for="email">Capabilities<b class="text-danger">*</b></label>
                            @Html.DropDownListFor(model => model.CapabilitiesId, Model.Capabilities, "--- Select Capabilities ---", new { onchange = "document.forms[0].submit();", @class = "form-control ddlValidation", id = "ddlCAP" })
                        </div>
                    </div>
                    <div class="col-sm-6 p-r-9">
                        <div class="form-group">
                            <label for="email">Line of Business<b class="text-danger">*</b></label>
                            @Html.DropDownListFor(model => model.LOBId, Model.LineOfBusiness, "--- Select LOB ---", new { @class = "form-control  ddlValidation", id = "ddlLOB" })
                        </div>
                    </div>

                    <div class="col-sm-6 p-1-9">
                        <div class="form-group">
                            <label for="email">Role<b class="text-danger">*</b></label>
                            @Html.DropDownListFor(model => model.RoleId, (IEnumerable<SelectListItem>)ViewBag.roleList, new { @class = "form-control ddlValidation", id = "ddlRole" })
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <label for="email">Upload Profile Picture</label>
                        <div class="input-group input-file form-group">
                            <a href="" target="_blank"></a>
                            <span class="input-group-addon">
                                <a class='btn btn-primary btn-sm'>
                                    Browse
                                    <input width="200" type="file" name="UserPhoto" id="fileUpload" onchange="$(this).parent().parent().parent().find('.input-file').html($(this).val());" />
                                </a>
                            </span>
                        </div>
                        <a class="right" data-toggle="modal" onclick="Troublelogging();" data-target="#myModal"><b>Having trouble logging in? Click here</b></a>
                    </div>
                    <div class="col-sm-6 p-1-9" align="center">
                        <img id="blah" src="~/Images/avatar1.png" alt="your image" class="img-thumbnail img-circle" style="width:100px" />
                    </div>
                    <div class="col-sm-12">
                        <span id="errorProfileImageSpan" style="display: none; color: red">Please Upload profile image.</span>
                        <span id="errorProfileImageLength" style="display: none; color: red">Image size should not be more than 2 MB.</span>
                        <span id="errorProfileImageExtension" style="display: none; color: red">Please upload only .jpeg .png extension image.</span>
                    </div>
                    @*<div class="form-group">
                          <label for="email">Upload Image</label>
                          <input type="file" name="UserPhoto" id="fileUpload" accept=".png,.jpg,.jpeg,.gif,.tif" />
                        </div>*@
                    <div class="col-sm-6 p-l-9">

                    </div>

                    <div class="col-sm-12 text-center m-t-20">
                        <button type="submit" class="btn btn-success btn-sm regstrBtn" disabled>Register</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id='Troublelogging'>
    </div>
}

<script src="~/CustomScripts/UserRegistration.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#myBtn").click(function () {
            $('#myModal').modal('show');
        });
    });

    function Troublelogging() {
        $.ajax
            ({
                url: "/Admin/Troublelogging",
                contentType: "application/json; charset=utf-8",
                type: "POST",
                datatype: "html",
                success: function (t) {
                    $('#Troublelogging').html(t);
                    $('#myModal').modal('show');
                },
                error: function () {
                    $("#Troublelogging").html("data Not Found");
                    window.location.href = "/Home/Error";
                }
            })
    }

    $(window).on('load', function () {
        $('#myModal').modal('hide');
    });

    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah').attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);
        }
    }

    $("#fileUpload").change(function () {
        readURL(this);
    });

    $('#fileUpload').bind('change', function () {
        $('#errorProfileImageLength').hide();
        $('#errorProfileImageExtension').hide();

        var fileExt = $('#fileUpload').val().split('.').pop().toLowerCase();
        if ($.inArray(fileExt, ['jpeg', 'jpg', 'png']) === -1) {
            $('#errorProfileImageExtension').show();
            $('.regstrBtn').prop("disabled", true);
            return false;
        }
        else
            $('.regstrBtn').prop("disabled", false);

        if (this.files[0].size / (1024 * 1024) > 2) {
            $('#errorProfileImageLength').show();
            $('.regstrBtn').prop("disabled", true);
            return false;
        }
        else
            $('.regstrBtn').prop("disabled", false);
    });
</script>


