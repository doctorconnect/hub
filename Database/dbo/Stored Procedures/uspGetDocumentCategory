
CREATE PROCEDURE [dbo].[uspGetDocumentCategory]      
(  
 @CapabilitiesId int,  
 @IsAdmin int  
 )                
AS                      
    BEGIN   
	if(@IsAdmin=0)                    
    BEGIN     
     SELECT D.ID,  
   D.NAME,  
  D.ISACTIVE,  
  R.USERCODE,  
  R.username as CREATEDBY,  
  D.CREATEDON,  
  D.MODIFIEDBY,  
  D.MODIFIEDON FROM [KMTDocumentCategory] D join [KMTUserRegistration] R on R.userNtid = D.CREATEDBY  
  WHERE D.CapId = @CapabilitiesId
  ORDER BY D.CREATEDON DESC  
  END   
 if(@IsAdmin=1)                    
       BEGIN 
	   SELECT D.ID,  
   D.NAME,  
  D.ISACTIVE,  
  R.USERCODE,  
  R.username as CREATEDBY,  
  D.CREATEDON,  
  D.MODIFIEDBY,  
  D.MODIFIEDON FROM [KMTDocumentCategory] D join [KMTUserRegistration] R on R.userNtid = D.CREATEDBY  
  ORDER BY D.CREATEDON DESC
	   END
 END 
GO
