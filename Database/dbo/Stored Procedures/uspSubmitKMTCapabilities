
CREATE  PROCEDURE [dbo].[uspSubmitKMTCapabilities]  
(  	
 @id  int,	
 @BsId  int,		 
 @Name  VARCHAR(50),
 @IsActive BIT,
 @CreatedBy VARCHAR(50),
 @CreatedOn DATETIME,
 @ModifiedBy VARCHAR(50),
 @ModifiedOn  DATETIME                         
)                                                      
AS                                                      
BEGIN        
    BEGIN TRANSACTION;      
      SAVE TRANSACTION MySavePoint;        
     BEGIN TRY
	 if(@id=0)   
	 BEGIN               
    INSERT INTO KMTCAPABILITIES (BSID,NAME,IDENTIFIER,ISACTIVE,CREATEDBY,CREATEDON,MODIFIEDBY,MODIFIEDON)
	   VALUES (@BsId ,@Name,'CAPABILITIES',@IsActive,@CreatedBy,@CreatedOn,'','');		
		END
	ELSE if(@id>0)   
	 BEGIN               
    update KMTCAPABILITIES set NAME = @Name,ModifiedBy=@ModifiedBy,ModifiedOn=@ModifiedOn,BSID=@BsId,IsActive=@IsActive where Id = @id;
	END          			                    
     END TRY       
     BEGIN CATCH      
        IF @@TRANCOUNT > 0      
        BEGIN      
            ROLLBACK TRANSACTION MySavePoint;       
        END      
      END CATCH                                                 
     COMMIT TRANSACTION                                                  
END

GO
